unit Globals;

interface

type
  TGlobal = class

  {$REGION 'Private Fields'}
  private
    FStoreID: String;
    FStoreName: String;

    FWorkstationID: String;
    FWorkstationName: String;

    FFiscalDevicePresent: Boolean;
    FFiscalDeviceID: String;
    FFiscalDeviceCOMPort: Integer;
    FFiscalDeviceBaudRate: Integer;
    FFiscalDeviceLineWidth: Integer;

    FIsLoggedUser: Boolean;
    FUserGID: Integer;
    FUserName: String;
    FUserPassword: String;

    FStoresFileName: String;
    FWorkstationsFileName: String;
    FFiscalDevicesFileName: String;
    FItemsFileName: String;
    FMeasuresFileName: String;
    FClientsFileName: String;
    FActionsFileName: String;
    FPaymentTypesFileName: String;
    FPermissionsFileName: String;
    FRolesFileName: String;
    FUsersFileName: String;
    FPermissionsRolesFileName: String;
    FRolesUsersFileName: String;

    FSettingsFileName: String;
    FSalesFolderName: String;
    FReversalsFolderName: String;
    FLogsFolderName: String;

    FFolder0: String;
    FFolder1: String;
    FFolder2: String;
    FFolder3: String;
    FFolder6: String;
    FFolder3001: String;
    FFolder3002: String;
    FFolder3003: String;
    FFolder3005: String;
    FFolder3006: String;
    FFolder3008: String;
    FFolder3009: String;
    FFolder3011: String;
    FFolder3021: String;
    FFolder3023: String;
    FFolder3031: String;
    FFolder3041: String;
    FFolder3051: String;
    FFolder3061: String;
    FFolder3071: String;
    FFolder3077: String;
    FFolder3081: String;
    FFolder3098: String;
    FFolder3099: String;

    FMinVIPSale: Double;
    FMaxPayment: Double;

    FShowCheckItem: Boolean;
  {$ENDREGION}


  {$REGION 'Private Methods'}
  private

  {$ENDREGION}


  {$REGION 'Private Properties Getters/Setters'}
  private

  {$ENDREGION}


  {$REGION 'Private Properties'}
  private

  {$ENDREGION}


  {$REGION 'Interfaced Properties Getters/Setters'}
  public

  {$ENDREGION}


  {$REGION 'Interfaced Properties'}
  public
    property MinVIPSale: Double read FMinVIPSale;
    property MaxPayment: Double read FMaxPayment;
    property ShowCheckItem: Boolean read FShowCheckItem write FShowCheckItem;

    property StoreID: String read FStoreID write FStoreID;
    property StoreName: String read FStoreName write FStoreName;

    property WorkstationID: String read FWorkstationID write FWorkstationID;
    property WorkstationName: String read FWorkstationName write FWorkstationName;

    property FiscalDeviceID: String read FFiscalDeviceID write FFiscalDeviceID;
    property FiscalDevicePresent: Boolean read FFiscalDevicePresent write FFiscalDevicePresent;
    property FiscalDeviceCOMPort: Integer read FFiscalDeviceCOMPort write FFiscalDeviceCOMPort;
    property FiscalDeviceBaudRate: Integer read FFiscalDeviceBaudRate write FFiscalDeviceBaudRate;
    property FiscalDeviceLineWidth: Integer read FFiscalDeviceLineWidth write FFiscalDeviceLineWidth;

    property IsLoggedUser: Boolean read FIsLoggedUser write FIsLoggedUser;
    property UserGID: Integer read FUserGID write FUserGID;
    property UserName: String read FUserName write FUserName;
    property UserPassword: String read FUserPassword write FUserPassword;

    property StoresFileName: String read FStoresFileName write FStoresFileName;
    property WorkstationsFileName: String read FWorkstationsFileName write FWorkstationsFileName;
    property FiscalDevicesFileName: String read FFiscalDevicesFileName write FFiscalDevicesFileName;
    property ItemsFileName: String read FItemsFileName write FItemsFileName;
    property MeasuresFileName: String read FMeasuresFileName write FMeasuresFileName;
    property ClientsFileName: String read FClientsFileName write FClientsFileName;
    property ActionsFileName: String read FActionsFileName write FActionsFileName;
    property PaymentTypesFileName: String read FPaymentTypesFileName write FPaymentTypesFileName;
    property PermissionsFileName: String read FPermissionsFileName write FPermissionsFileName;
    property RolesFileName: String read FRolesFileName write FRolesFileName;
    property UsersFileName: String read FUsersFileName write FUsersFileName;
    property PermissionsRolesFileName: String read FPermissionsRolesFileName write FPermissionsRolesFileName;
    property RolesUsersFileName: String read FRolesUsersFileName write FRolesUsersFileName;

    property SettingsFileName: String read FSettingsFileName write FSettingsFileName;
    property SalesFolderName: String read FSalesFolderName write FSalesFolderName;
    property ReversalsFolderName: String read FReversalsFolderName write FReversalsFolderName;
    property LogsFolderName: String read FLogsFolderName write FLogsFolderName;

    property TempFolder: String read FFolder0;
    property ItemsFolder: String read FFolder3;
    property ContragentsFolder: String read FFolder2;
    property StructureFolder: String read FFolder1;
    property SalesFolder: String read FFolder3002;
  {$ENDREGION}


  {$REGION 'Interfaced Methods'}
  public

  {$ENDREGION}


  {$REGION 'Constructors/Destructors'}
  public
    constructor Create;
    destructor Destroy; override;
  {$ENDREGION}

  end;

var
  G: TGlobal;
//uses
//  Interfaces.Model.FiscalDevice;
//  Interfaces.Model.Data.Users,
//  Interfaces.Model.Data.Sources,
//  Interfaces.Model.Data.Regions,
//  Interfaces.Model.Data.Zones,
//  Interfaces.Model.Data.Destinations,
//  Interfaces.Model.Data.Clients,
//  Interfaces.Model.Data.Categories,
//  Interfaces.Model.Data.Articles,
//  Interfaces.Model.Data.Modificators,
//  Interfaces.Model.Data.Bills;
//
//var
//  ModelFiscalDevice: IModelFiscalDevice;
//  ModelDataUsers: IModelDataUsers;
//  ModelDataSources: IModelDataSources;
//  ModelDataRegions: IModelDataRegions;
//  ModelDataZones: IModelDataZones;
//  ModelDataDestinations: IModelDataDestinations;
//  ModelDataClients: IModelDataClients;
//  ModelDataCategories: IModelDataCategories;
//  ModelDataArticles: IModelDataArticles;
//  ModelDataModificators: IModelDataModificators;
//  ModelDataBills: IModelDataBills;

  procedure Initialize;

implementation

uses
  System.IOUtils,
  System.SysUtils,
  Model.AppSettings;

procedure SetFormatSettings;
begin
	FormatSettings.DateSeparator := '.';
	FormatSettings.TimeSeparator := ':';
	FormatSettings.DecimalSeparator := '.';
	FormatSettings.ShortDateFormat := 'dd.mm.yyyy';
	FormatSettings.ShortTimeFormat := 'hh:mm:ss:zzz';
	FormatSettings.LongDateFormat := 'dd.mm.yyyy';
	FormatSettings.LongTimeFormat := 'hh:mm:ss:zzz';
end;

procedure InitializeGlobals;
begin
//  ModelDataUsers := CreateModelDataUsersInstance;
end;

procedure InitializeORM;
begin
//  AssignDataSetModelClassSales(DataModuleSale.FDMemTableSale);
//  AssignDataSetModelClassSale(DataModuleSale.FDMemTableSale);
end;

procedure CreateViewModels;
begin
  // Main
//  ViewMain.ViewModel := CreateViewModelMain;

//  // BillsListOverview
//  ViewDeskMain.ViewDeskBillsListOverview.ViewModel := CreateViewModelDeskBillsListOverview;
//
//  // BillsListSelection
//  ViewDeskMain.ViewDeskBillsListSelection.ViewModel := CreateViewModelDeskBillsListSelection;
//
//  // NewClient
//  ViewDeskMain.ViewDeskNewClient.ViewModel := CreateViewModelDeskNewClient;
//
//  // NewBill
//  ViewDeskMain.ViewDeskNewBill.ViewModel := CreateViewModelDeskNewBill;
//
//  // EditBill
//  ViewDeskMain.ViewDeskEditBill.ViewModel := CreateViewModelDeskEditBill;
//
//  // SelectList
//  ViewDeskMain.ViewDeskSelectList.ViewModel := CreateViewModelDeskSelectList;
//
//  // EditPanel
//  ViewDeskMain.ViewDeskEditPanel.ViewModel := CreateViewModelDeskEditPanel;
//
//  // InfoPanel
//  ViewDeskMain.ViewDeskInfoPanel.ViewModel := CreateViewModelDeskInfoPanel;
//

  // ViewModelMain to ViewModels
//  ViewDeskMain.ViewModel.ViewModelDeskBillsListOverview := ViewDeskMain.ViewDeskBillsListOverview.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskBillsListSelection := ViewDeskMain.ViewDeskBillsListSelection.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskNewClient := ViewDeskMain.ViewDeskNewClient.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskNewBill := ViewDeskMain.ViewDeskNewBill.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskEditBill := ViewDeskMain.ViewDeskEditBill.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskSelectList := ViewDeskMain.ViewDeskSelectList.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskEditPanel := ViewDeskMain.ViewDeskEditPanel.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskInfoPanel := ViewDeskMain.ViewDeskInfoPanel.ViewModel;
end;

procedure BindObservers;
begin
//  // Main
//  ViewDeskMain.ViewModel.Observable := CreateObservableClass;
//  ViewDeskMain.ViewModel.Observable.Subscribe(ViewDeskMain.Observer);
//
//  // BillsListOverview
//
//  // BillsListSelection
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem01.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem02.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem03.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem04.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem05.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem06.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem07.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem08.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem09.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem10.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem11.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem12.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem13.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem14.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem15.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem16.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem17.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem18.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem19.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem20.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem21.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem22.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem23.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem24.Observable := CreateObservableClass;
//
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem01.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem02.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem03.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem04.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem05.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem06.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem07.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem08.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem09.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem10.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem11.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem12.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem13.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem14.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem15.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem16.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem17.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem18.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem19.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem20.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem21.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem22.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem23.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem24.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//
//  // NewBill
//
//  // EditBill
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem01.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem02.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem03.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem04.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem05.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem06.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem07.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem08.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem09.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem10.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem11.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem12.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem13.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem14.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem15.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem16.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem17.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem18.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem19.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem20.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem21.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem22.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem23.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem24.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem25.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem26.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem27.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem28.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem29.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem30.Observable := CreateObservableClass;
//
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem01.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem02.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem03.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem04.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem05.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem06.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem07.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem08.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem09.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem10.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem11.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem12.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem13.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem14.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem15.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem16.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem17.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem18.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem19.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem20.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem21.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem22.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem23.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem24.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem25.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem26.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem27.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem28.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem29.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem30.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//
//  // SelectList
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem01.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem02.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem03.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem04.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem05.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem06.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem07.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem08.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem09.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem10.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem11.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem12.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem13.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem14.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem15.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem16.Observable := CreateObservableClass;
//
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem01.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem02.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem03.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem04.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem05.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem06.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem07.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem08.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem09.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem10.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem11.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem12.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem13.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem14.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem15.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem16.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//
//  // EditPanel
//  ViewDeskMain.ViewDeskEditPanel.ViewModel.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditPanel.ViewModel.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//
//  // InfoPanel
//
end;

procedure InitializeDataClasses;
begin
//  ModelDataUsers.UpdateFromServer;
//  ModelDataUsers.UpdateFromDataSet;
//  ModelDataSources.UpdateFromServer;
//  ModelDataSources.UpdateFromDataSet;
//  ModelDataRegions.UpdateFromServer;
//  ModelDataRegions.UpdateFromDataSet;
//  ModelDataZones.UpdateFromServer;
//  ModelDataZones.UpdateFromDataSet;
//  ModelDataDestinations.UpdateFromServer;
//  ModelDataDestinations.UpdateFromDataSet;
//  ModelDataCategories.UpdateFromServer;
//  ModelDataCategories.UpdateFromDataSet;
//  ModelDataArticles.UpdateFromServer;
//  ModelDataArticles.UpdateFromDataSet;
//  ModelDataModificators.UpdateFromServer;
//  ModelDataModificators.UpdateFromDataSet;
//  ModelDataBills.UpdateFromServer;
//  ModelDataBills.UpdateFromDataSet;
//  ModelDataClients.UpdateFromServer;
//  ModelDataClients.UpdateFromDataSet;
end;

procedure Initialize;
begin
  SetFormatSettings;
  InitializeGlobals;
  InitializeORM;
  InitializeDataClasses;
  CreateViewModels;
  BindObservers;
end;

{ TGlobal }

{$REGION 'Private Methods'}

{$ENDREGION}


{$REGION 'Private Properties Getters/Setters'}

{$ENDREGION}


{$REGION 'Interfaced Properties Getters/Setters'}

{$ENDREGION}


{$REGION 'Interfaced Methods'}

{$ENDREGION}


{$REGION 'Constructors/Destructors'}

constructor TGlobal.Create;
var
  LAppFolder: String;
  LNomenclaturesFolder: string;
  LStoreFolderName: String;
  LWorkstarionFolderName: String;
begin
  FStoreID := TAppSettings.GetSetting('StoreID');
  FStoreName := TAppSettings.GetSetting('StoreName');

  FWorkstationID := TAppSettings.GetSetting('WorkstationID');
  FWorkstationName := TAppSettings.GetSetting('WorkstationName');

  FFiscalDevicePresent := (TAppSettings.GetIntegerSetting('FiscalDevicePresent', 0) = 1);
  FFiscalDeviceID := TAppSettings.GetSetting('FiscalDeviceID');
  FFiscalDeviceCOMPort := TAppSettings.GetIntegerSetting('FiscalDeviceCOMPort', 3);
  FFiscalDeviceBaudRate := TAppSettings.GetIntegerSetting('FiscalDeviceBaudRate', 115000);
  FFiscalDeviceLineWidth := TAppSettings.GetIntegerSetting('FiscalDeviceLineWidth', 25);

  FIsLoggedUser := False;
  FUserGID := 1;
  FUserName := 'КАСИЕР 1';
  FUserPassword := '0000';

  LAppFolder := TPath.GetDirectoryName(ParamStr(0));
  LNomenclaturesFolder := TPath.Combine(LAppFolder, 'номенклатури');
  ForceDirectories(LNomenclaturesFolder);

  FStoresFileName := TPath.Combine(LNomenclaturesFolder, 'търговски обекти.json');
  FWorkstationsFileName := TPath.Combine(LNomenclaturesFolder, 'работни места.json');
  FFiscalDevicesFileName := TPath.Combine(LNomenclaturesFolder, 'фискални устройства.json');
  FItemsFileName := TPath.Combine(LNomenclaturesFolder, 'стоки.json');
  FMeasuresFileName := TPath.Combine(LNomenclaturesFolder, 'мерки.json');
  FClientsFileName := TPath.Combine(LNomenclaturesFolder, 'клиенти.json');
  FActionsFileName := TPath.Combine(LNomenclaturesFolder, 'операции.json');
  FPaymentTypesFileName := TPath.Combine(LNomenclaturesFolder, 'видове плащания.json');
  FPermissionsFileName := TPath.Combine(LNomenclaturesFolder, 'разрешения.json');
  FRolesFileName := TPath.Combine(LNomenclaturesFolder, 'роли.json');
  FUsersFileName := TPath.Combine(LNomenclaturesFolder, 'потребители.json');
  FPermissionsRolesFileName := TPath.Combine(LNomenclaturesFolder, 'разрешения на роли.json');
  FRolesUsersFileName := TPath.Combine(LNomenclaturesFolder, 'роли на потребители.json');

  LStoreFolderName := TPath.Combine(LAppFolder, FStoreName);
  LWorkstarionFolderName := TPath.Combine(LStoreFolderName, FWorkstationName);


//	номенклатури	- папка с номенклатурите
//		търговски обекти.json
//		работни места.json
//		фискални устройства.json
//		стоки.json
//		мерки.json
//		клиенти.json
//		операции.json
//		видове плащания.json
//		разрешения.json
//		роли.json
//		потребители.json
//		разрешения на роли.json
//		роли на потребители.json
//	[търговски обект] – папка с данни за конкретен търговски обект
//		[работно място] – папка с продажби, сторно и дневници на конкретен търговски обект
//			настройки.json – файл с настройките за конкретното работно място
//			продажби – папка със записи от клас ПРОДАЖБИ
//				[YYYY] – папка за година
//					[MM] – папка за месец от година
//						[DD] – папка за ден от месец от година
//							продажба#УНП.json – файлове със запис от клас ПРОДАЖБА.
//			сторно – папка със записи от клас СТОРНО
//				[YYYY] – папка за година
//					[MM] – папка за месец от година
//						[DD] – папка за ден от месец от година
//							сторно#УНП.json – файлове със запис от клас СТОРНО.
//			дневници – папка със записи от клас ДНЕВНИК
//				[YYYY] – папка за година
//					[MM] – папка за месец от година
//						[DD] – папка за ден от месец от година
//							дневник#hh-mm-ss-zzz.json – файлове със запис от клас СТОРНО.

//    FSettingsFileName: String;


  FSalesFolderName := TPath.Combine(LWorkstarionFolderName, 'прожби');
  FReversalsFolderName := TPath.Combine(LWorkstarionFolderName, 'сторно');
  FLogsFolderName := TPath.Combine(LWorkstarionFolderName, 'дневници');




  FFolder0 := TAppSettings.GetSetting('Folder0');
  FFolder1 := TAppSettings.GetSetting('Folder1');
  FFolder2 := TAppSettings.GetSetting('Folder2');
  FFolder3 := TAppSettings.GetSetting('Folder3');
  FFolder6 := TAppSettings.GetSetting('Folder6');
  FFolder3001 := TAppSettings.GetSetting('Folder3001');
  FFolder3002 := TAppSettings.GetSetting('Folder3002');
  FFolder3003 := TAppSettings.GetSetting('Folder3003');
  FFolder3005 := TAppSettings.GetSetting('Folder3005');
  FFolder3006 := TAppSettings.GetSetting('Folder3006');
  FFolder3008 := TAppSettings.GetSetting('Folder3008');
  FFolder3009 := TAppSettings.GetSetting('Folder3009');
  FFolder3011 := TAppSettings.GetSetting('Folder3011');
  FFolder3021 := TAppSettings.GetSetting('Folder3021');
  FFolder3023 := TAppSettings.GetSetting('Folder3023');
  FFolder3031 := TAppSettings.GetSetting('Folder3031');
  FFolder3041 := TAppSettings.GetSetting('Folder3041');
  FFolder3051 := TAppSettings.GetSetting('Folder3051');
  FFolder3061 := TAppSettings.GetSetting('Folder3061');
  FFolder3071 := TAppSettings.GetSetting('Folder3071');
  FFolder3077 := TAppSettings.GetSetting('Folder3077');
  FFolder3081 := TAppSettings.GetSetting('Folder3081');
  FFolder3098 := TAppSettings.GetSetting('Folder3098');
  FFolder3099 := TAppSettings.GetSetting('Folder3099');

  FMinVIPSale := TAppSettings.GetFloatSetting('MinVIPSale');
  FMaxPayment := TAppSettings.GetFloatSetting('MaxPayment', 1000.00);

  FShowCheckItem := False;

  TFile.WriteAllText(TPath.Combine(ItemsFolder, 'start.txt'),'');
  TFile.WriteAllText(TPath.Combine(ContragentsFolder, 'start.txt'),'');
end;

destructor TGlobal.Destroy;
begin

  inherited;
end;

{$ENDREGION}

end.
