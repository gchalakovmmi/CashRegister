
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251"/>
<title>int FunctionName(a, [b])</title>
<script type="text/javascript" src="../jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="../jq.js"></script>
<link href="../style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
	<tr>
	  <td><h1>CMD_119_3_0</h1></td>
	</tr>
	<tr>
	  <td id="descr">
			<label><span>!</span> Description</label>
			<h2><pre>77h (119)	РАБОТА С КЛЕН


Четене на данни от КЛЕН. 
Използува се в комбинация с някои от командите от клас 'R'. 
Служи за прочитане на следващ текстови ред от КЛЕН. 

Възможните отговори са същите както при командите за получаване на първи ред:
	CMD_119_2_0
	CMD_119_2_1
	CMD_119_2_2
	CMD_119_2_3



ВНИМАНИЕ! 
Изпращането на тази команда без предхождаща за първи ред, задаваща обхвата на справката, може да доведе до четенето на безсмислени данни!


	Област за данни:	Няма
	Отговор:
			FP_RESULT
			THE_TEXT

Командата връща един от отговорите, посочени по-долу:
	FP_RESULT	
		P	Има пореден текстов ред в КЛЕН, съдържанието му е в THE_TEXT;
		*	Има пореден текстов ред в КЛЕН и това е празен ред - разделител на документи. 
		F	Няма повече данни в КЛЕН.

	THE_TEXT	Текстов ред в КЛЕН. Прочетеният текст е винаги в кодова таблица 1251, независимо дали от ключетата 
			е избран режим DOS-овска кодова таблица. Кодовата таблица е важна за правилното пресмятане на 
			SHA-1 контролната сума.

Начинът на работа е следният:
1.	Подава се командата.
2.	Ако отговорът е 'F', то няма такива данни в КЛЕН. 
3.	В противен случай се изпраща команда CMD_119_3_0, докато се върне отговор 'F' (няма повече данни). 
	Така може да се изтегли ред по ред желаната част от КЛЕН като текст.


ИНФОРМАЦИЯ ЗА ВИДА НА ВЪРНАТИЯ ТЕКСТ ПРИ ЧЕТЕНЕ НА КЛЕН

1.	Прочетените документи нямат графично лого.
2.	Центрирането се имитира с добавяне на интервали в началото на реда.
3.	Печатът с двойна ширина се имитира с добавяне на един интервал преди всяка буква.
4.	Ако във фискалните или служебните бонове има баркод, той се заменя с текста "БАРКОД [XXXX]", където 
	XXXX е текстовата информация от баркода.
5.	Прочетеният ред съдържа само текст, без символите <CR> и <LF> в края на реда. 
	При изтегляне на текстова информация от КЛЕН тези символи трябва да се добавят в края на всеки ред в тази последователност. 


</pre></h2>
		</td>
	</tr>
	<tr>
	  <td id="param">
			<label><span>!</span>Parameters</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th>Parameter</th>
					<th>Parameter mode</th>
					<th>Parameter type</th>
					<th>Description</th>
				</tr>
			<tr>
				<td id="col1">F_RESULT</td>
				<td id="col2">[IN/OUT]</td>
				<td id="col3">[STRING]</td>
				<td id="def"><pre>FP_RESULT	
		P	Има пореден текстов ред в КЛЕН, съдържанието му е в THE_TEXT;
		*	Има пореден текстов ред в КЛЕН и това е празен ред - разделител на документи. 
		F	Няма повече данни в КЛЕН.
</pre>

				<label><span>!</span>Error support</label>
				<div>			<table width="100%" border="1">
				<tr>
					<th>Error value</th>
					<th>Verification type</th>
					<th>Description</th>
				</tr>
			<tr>
				<td class="col1">-10524</td>
				<td class="VerificationType">Проверка за наличие на изходящ параметър.</td>
				<td class="ErrDescription">Missing output parameter.
</td>
			</tr>
			<tr>
				<td class="col1">-10515</td>
				<td class="VerificationType">Проверка дали изходния параметър е със стойност от даден изброен списък от стойности.</td>
				<td class="ErrDescription">Wrong output data.
</td>
			</tr>
			</table>
</div>
</td>
			</tr>
			<tr>
				<td id="col1">THE_TEXT</td>
				<td id="col2">[IN/OUT]</td>
				<td id="col3">[STRING]</td>
				<td id="def"><pre>THE_TEXT	

Текстов ред в КЛЕН. Прочетеният текст е винаги в кодова таблица 1251, независимо дали от ключетата 
е избран режим DOS-овска кодова таблица. Кодовата таблица е важна за правилното пресмятане на 
SHA-1 контролната сума.</pre>

</td>
			</tr>
			</table>
			</div>
		</td>
	</tr>
</table>
<center>&copy; Copyright <a href="http://www.datecs.bg">DATECS</a> 2010 &reg;</center>
</body>
</html>
