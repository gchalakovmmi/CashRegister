unit Globals;

interface

type
  TGlobal = class

  {$REGION 'Private Fields'}
  private
    FStoreGID: Integer;
    FStoreName: String;

    FWorkstationGID: Integer;
    FWorkstationName: String;

    FFiscalDevicePresent: Boolean;
    FFiscalDeviceCOMPort: Integer;
    FFiscalDeviceBaudRate: Integer;
    FFiscalDeviceLineWidth: Integer;

    FIsLoggedUser: Boolean;
    FUserGID: Integer;
    FUserName: String;
    FUserPassword: String;

    FFolder0: String;
    FFolder1: String;
    FFolder2: String;
    FFolder3: String;
    FFolder6: String;
    FFolder3001: String;
    FFolder3002: String;
    FFolder3003: String;
    FFolder3005: String;
    FFolder3006: String;
    FFolder3008: String;
    FFolder3009: String;
    FFolder3011: String;
    FFolder3021: String;
    FFolder3023: String;
    FFolder3031: String;
    FFolder3041: String;
    FFolder3051: String;
    FFolder3061: String;
    FFolder3071: String;
    FFolder3077: String;
    FFolder3081: String;
    FFolder3098: String;
    FFolder3099: String;

    FMinVIPSale: Double;
    FMaxPayment: Double;
  {$ENDREGION}


  {$REGION 'Private Methods'}
  private

  {$ENDREGION}


  {$REGION 'Private Properties Getters/Setters'}
  private

  {$ENDREGION}


  {$REGION 'Private Properties'}
  private

  {$ENDREGION}


  {$REGION 'Interfaced Properties Getters/Setters'}
  public

  {$ENDREGION}


  {$REGION 'Interfaced Properties'}
  public
    property MinVIPSale: Double read FMinVIPSale;
    property MaxPayment: Double read FMaxPayment;

    property StoreGID: Integer read FStoreGID write FStoreGID;
    property StoreName: String read FStoreName write FStoreName;

    property WorkstationGID: Integer read FWorkstationGID write FWorkstationGID;
    property WorkstationName: String read FWorkstationName write FWorkstationName;

    property FiscalDevicePresent: Boolean read FFiscalDevicePresent write FFiscalDevicePresent;
    property FiscalDeviceCOMPort: Integer read FFiscalDeviceCOMPort write FFiscalDeviceCOMPort;
    property FiscalDeviceBaudRate: Integer read FFiscalDeviceBaudRate write FFiscalDeviceBaudRate;
    property FiscalDeviceLineWidth: Integer read FFiscalDeviceLineWidth write FFiscalDeviceLineWidth;

    property IsLoggedUser: Boolean read FIsLoggedUser write FIsLoggedUser;
    property UserGID: Integer read FUserGID write FUserGID;
    property UserName: String read FUserName write FUserName;
    property UserPassword: String read FUserPassword write FUserPassword;

    property TempFolder: String read FFolder0;
    property ItemsFolder: String read FFolder3;
  {$ENDREGION}


  {$REGION 'Interfaced Methods'}
  public

  {$ENDREGION}


  {$REGION 'Constructors/Destructors'}
  public
    constructor Create;
    destructor Destroy; override;
  {$ENDREGION}

  end;

var
  G: TGlobal;
//uses
//  Interfaces.Model.FiscalDevice;
//  Interfaces.Model.Data.Users,
//  Interfaces.Model.Data.Sources,
//  Interfaces.Model.Data.Regions,
//  Interfaces.Model.Data.Zones,
//  Interfaces.Model.Data.Destinations,
//  Interfaces.Model.Data.Clients,
//  Interfaces.Model.Data.Categories,
//  Interfaces.Model.Data.Articles,
//  Interfaces.Model.Data.Modificators,
//  Interfaces.Model.Data.Bills;
//
//var
//  ModelFiscalDevice: IModelFiscalDevice;
//  ModelDataUsers: IModelDataUsers;
//  ModelDataSources: IModelDataSources;
//  ModelDataRegions: IModelDataRegions;
//  ModelDataZones: IModelDataZones;
//  ModelDataDestinations: IModelDataDestinations;
//  ModelDataClients: IModelDataClients;
//  ModelDataCategories: IModelDataCategories;
//  ModelDataArticles: IModelDataArticles;
//  ModelDataModificators: IModelDataModificators;
//  ModelDataBills: IModelDataBills;

  procedure Initialize;

implementation

uses
  System.IOUtils,
  System.SysUtils,
  Model.AppSettings,

  DataModule.Sale,

  Model.Classes.Sales,
  Model.Classes.Sale,
  Model.Classes.Sale.Details,
  Model.Classes.Sale.Detail,
  Model.Classes.Sale.Cancellations,
  Model.Classes.Sale.Cancellation,
  Model.Classes.Sale.Payments,
  Model.Classes.Sale.Payment;

  //  Interfaces.Enums,
//
//  Model.DataSnap.Client,
//
//  Model.Data.Users,
//  Model.Data.Regions,
//  Model.Data.Sources,
//  Model.Data.Zones,
//  Model.Data.Destinations,
//  Model.Data.Clients,
//  Model.Data.Categories,
//  Model.Data.Articles,
//  Model.Data.Modificators,
//  Model.Data.Bills,
//
//  Model.Classes.Users,
//  Model.Classes.User,
//  Model.Classes.Sources,
//  Model.Classes.Source,
//  Model.Classes.Regions,
//  Model.Classes.Region,
//  Model.Classes.Zones,
//  Model.Classes.Zone,
//  Model.Classes.Destinations,
//  Model.Classes.Destination,
//  Model.Classes.Categories,
//  Model.Classes.Category,
//  Model.Classes.Articles,
//  Model.Classes.Article,
//  Model.Classes.Modificators,
//  Model.Classes.Modificator,
//  Model.Classes.Clients,
//  Model.Classes.Client,
//
//  Model.Classes.Bills,
//  Model.Classes.Bill,
//  Model.Classes.Bill.Guests,
//  Model.Classes.Bill.Guest,
//  Model.Classes.Bill.Details,
//  Model.Classes.Bill.Detail,
//  Model.Classes.Bill.Detail.Modificators,
//  Model.Classes.Bill.Detail.Modificator,
//  Model.Classes.Bill.Checks,
//  Model.Classes.Bill.Check,
//  Model.Classes.Bill.Check.Details,
//  Model.Classes.Bill.Check.Detail,
//
//  Interfaces.Model.Pattern.Observer,
//  Model.Pattern.Observer.Observer,
//  Model.Pattern.Observer.Observable,
//
//  ViewModel.Main,
//  ViewModel.Desk.BillsList.Overview,
//  ViewModel.Desk.BillsList.Selection,
//  ViewModel.Desk.NewClient,
//  ViewModel.Desk.NewBill,
//  ViewModel.Desk.EditBill,
//  ViewModel.Desk.Select.List,
//  ViewModel.Desk.EditPanel,
//  ViewModel.Desk.InfoPanel,
//
//  View.Main;

procedure SetFormatSettings;
begin
	FormatSettings.DateSeparator := '.';
	FormatSettings.TimeSeparator := ':';
	FormatSettings.DecimalSeparator := '.';
	FormatSettings.ShortDateFormat := 'dd.mm.yyyy';
	FormatSettings.ShortTimeFormat := 'hh:mm:ss:zzz';
	FormatSettings.LongDateFormat := 'dd.mm.yyyy';
	FormatSettings.LongTimeFormat := 'hh:mm:ss:zzz';
end;

procedure InitializeGlobals;
begin
//  ModelDataUsers := CreateModelDataUsersInstance;
//  ModelDataSources := CreateModelDataSourcesInstance;
//  ModelDataRegions := CreateModelDataRegionsInstance;
//  ModelDataZones := CreateModelDataZonesInstance;
//  ModelDataDestinations := CreateModelDataDestinationsInstance;
//  ModelDataClients := CreateModelDataClientsInstance;
//  ModelDataCategories := CreateModelDataCategoriesInstance;
//  ModelDataArticles := CreateModelDataArticlesInstance;
//  ModelDataModificators := CreateModelDataModificatorsInstance;
//  ModelDataBills := CreateModelDataBillsInstance;
end;

procedure InitializeORM;
begin
  AssignDataSetModelClassSales(DataModuleSale.FDMemTableSale);
  AssignDataSetModelClassSale(DataModuleSale.FDMemTableSale);

  AssignDataSetModelClassSaleDetails(DataModuleSale.FDMemTableSaleDetails);
  AssignDataSetModelClassSaleDetail(DataModuleSale.FDMemTableSaleDetails);
  AssignDataSet2ModelClassSaleDetail(DataModuleSale.FDMemTableSaleDetails);

  AssignDataSetModelClassSaleCancellations(DataModuleSale.FDMemTableSaleCancellations);
  AssignDataSetModelClassSaleCancellation(DataModuleSale.FDMemTableSaleCancellations);
  AssignDataSet2ModelClassSaleCancellation(DataModuleSale.FDMemTableSaleDetails);

  AssignDataSetModelClassSalePayments(DataModuleSale.FDMemTableSalePayments);
  AssignDataSetModelClassSalePayment(DataModuleSale.FDMemTableSalePayments);
end;

procedure CreateViewModels;
begin
  // Main
//  ViewMain.ViewModel := CreateViewModelMain;

//  // BillsListOverview
//  ViewDeskMain.ViewDeskBillsListOverview.ViewModel := CreateViewModelDeskBillsListOverview;
//
//  // BillsListSelection
//  ViewDeskMain.ViewDeskBillsListSelection.ViewModel := CreateViewModelDeskBillsListSelection;
//
//  // NewClient
//  ViewDeskMain.ViewDeskNewClient.ViewModel := CreateViewModelDeskNewClient;
//
//  // NewBill
//  ViewDeskMain.ViewDeskNewBill.ViewModel := CreateViewModelDeskNewBill;
//
//  // EditBill
//  ViewDeskMain.ViewDeskEditBill.ViewModel := CreateViewModelDeskEditBill;
//
//  // SelectList
//  ViewDeskMain.ViewDeskSelectList.ViewModel := CreateViewModelDeskSelectList;
//
//  // EditPanel
//  ViewDeskMain.ViewDeskEditPanel.ViewModel := CreateViewModelDeskEditPanel;
//
//  // InfoPanel
//  ViewDeskMain.ViewDeskInfoPanel.ViewModel := CreateViewModelDeskInfoPanel;
//

  // ViewModelMain to ViewModels
//  ViewDeskMain.ViewModel.ViewModelDeskBillsListOverview := ViewDeskMain.ViewDeskBillsListOverview.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskBillsListSelection := ViewDeskMain.ViewDeskBillsListSelection.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskNewClient := ViewDeskMain.ViewDeskNewClient.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskNewBill := ViewDeskMain.ViewDeskNewBill.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskEditBill := ViewDeskMain.ViewDeskEditBill.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskSelectList := ViewDeskMain.ViewDeskSelectList.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskEditPanel := ViewDeskMain.ViewDeskEditPanel.ViewModel;
//  ViewDeskMain.ViewModel.ViewModelDeskInfoPanel := ViewDeskMain.ViewDeskInfoPanel.ViewModel;
end;

procedure BindObservers;
begin
//  // Main
//  ViewDeskMain.ViewModel.Observable := CreateObservableClass;
//  ViewDeskMain.ViewModel.Observable.Subscribe(ViewDeskMain.Observer);
//
//  // BillsListOverview
//
//  // BillsListSelection
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem01.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem02.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem03.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem04.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem05.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem06.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem07.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem08.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem09.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem10.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem11.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem12.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem13.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem14.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem15.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem16.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem17.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem18.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem19.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem20.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem21.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem22.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem23.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem24.Observable := CreateObservableClass;
//
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem01.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem02.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem03.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem04.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem05.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem06.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem07.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem08.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem09.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem10.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem11.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem12.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem13.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem14.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem15.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem16.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem17.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem18.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem19.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem20.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem21.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem22.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem23.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskBillsListSelection.ViewDeskBillsListSelectionItem24.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//
//  // NewBill
//
//  // EditBill
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem01.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem02.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem03.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem04.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem05.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem06.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem07.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem08.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem09.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem10.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem11.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem12.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem13.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem14.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem15.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem16.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem17.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem18.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem19.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem20.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem21.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem22.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem23.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem24.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem25.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem26.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem27.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem28.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem29.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem30.Observable := CreateObservableClass;
//
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem01.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem02.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem03.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem04.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem05.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem06.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem07.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem08.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem09.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem10.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem11.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem12.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem13.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem14.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem15.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem16.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem17.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem18.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem19.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem20.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem21.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem22.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem23.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem24.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem25.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem26.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem27.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem28.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem29.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskEditBill.ViewDeskEditBillItem30.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//
//  // SelectList
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem01.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem02.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem03.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem04.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem05.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem06.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem07.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem08.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem09.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem10.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem11.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem12.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem13.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem14.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem15.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem16.Observable := CreateObservableClass;
//
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem01.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem02.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem03.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem04.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem05.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem06.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem07.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem08.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem09.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem10.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem11.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem12.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem13.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem14.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem15.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//  ViewDeskMain.ViewDeskSelectList.ViewDeskSelectItem16.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//
//  // EditPanel
//  ViewDeskMain.ViewDeskEditPanel.ViewModel.Observable := CreateObservableClass;
//  ViewDeskMain.ViewDeskEditPanel.ViewModel.Observable.Subscribe(ViewDeskMain.ViewModel.Observer);
//
//  // InfoPanel
//
end;

procedure InitializeDataClasses;
begin
//  ModelDataUsers.UpdateFromServer;
//  ModelDataUsers.UpdateFromDataSet;
//  ModelDataSources.UpdateFromServer;
//  ModelDataSources.UpdateFromDataSet;
//  ModelDataRegions.UpdateFromServer;
//  ModelDataRegions.UpdateFromDataSet;
//  ModelDataZones.UpdateFromServer;
//  ModelDataZones.UpdateFromDataSet;
//  ModelDataDestinations.UpdateFromServer;
//  ModelDataDestinations.UpdateFromDataSet;
//  ModelDataCategories.UpdateFromServer;
//  ModelDataCategories.UpdateFromDataSet;
//  ModelDataArticles.UpdateFromServer;
//  ModelDataArticles.UpdateFromDataSet;
//  ModelDataModificators.UpdateFromServer;
//  ModelDataModificators.UpdateFromDataSet;
//  ModelDataBills.UpdateFromServer;
//  ModelDataBills.UpdateFromDataSet;
//  ModelDataClients.UpdateFromServer;
//  ModelDataClients.UpdateFromDataSet;
end;

procedure Initialize;
begin
  SetFormatSettings;
  InitializeGlobals;
  InitializeORM;
  InitializeDataClasses;
  CreateViewModels;
  BindObservers;
end;

{ TGlobal }

{$REGION 'Private Methods'}

{$ENDREGION}


{$REGION 'Private Properties Getters/Setters'}

{$ENDREGION}


{$REGION 'Interfaced Properties Getters/Setters'}

{$ENDREGION}


{$REGION 'Interfaced Methods'}

{$ENDREGION}


{$REGION 'Constructors/Destructors'}

constructor TGlobal.Create;
begin
  FStoreGID := TAppSettings.GetIntegerSetting('StoreGID');
  FStoreName := TAppSettings.GetSetting('StoreName');

  FWorkstationGID := TAppSettings.GetIntegerSetting('WorkstationGID');
  FWorkstationName := TAppSettings.GetSetting('WorkstationName');

  FFiscalDevicePresent := (TAppSettings.GetIntegerSetting('FiscalDevicePresent', 0) = 1);
  FFiscalDeviceCOMPort := TAppSettings.GetIntegerSetting('FiscalDeviceCOMPort', 3);
  FFiscalDeviceBaudRate := TAppSettings.GetIntegerSetting('FiscalDeviceBaudRate', 115000);
  FFiscalDeviceLineWidth := TAppSettings.GetIntegerSetting('FiscalDeviceLineWidth', 25);

  FIsLoggedUser := False;
  FUserGID := 1;
  FUserName := ' ¿—»≈– 1';
  FUserPassword := '0000';

  FFolder0 := TAppSettings.GetSetting('Folder0');
  FFolder1 := TAppSettings.GetSetting('Folder1');
  FFolder2 := TAppSettings.GetSetting('Folder2');
  FFolder3 := TAppSettings.GetSetting('Folder3');
  FFolder6 := TAppSettings.GetSetting('Folder6');
  FFolder3001 := TAppSettings.GetSetting('Folder3001');
  FFolder3002 := TAppSettings.GetSetting('Folder3002');
  FFolder3003 := TAppSettings.GetSetting('Folder3003');
  FFolder3005 := TAppSettings.GetSetting('Folder3005');
  FFolder3006 := TAppSettings.GetSetting('Folder3006');
  FFolder3008 := TAppSettings.GetSetting('Folder3008');
  FFolder3009 := TAppSettings.GetSetting('Folder3009');
  FFolder3011 := TAppSettings.GetSetting('Folder3011');
  FFolder3021 := TAppSettings.GetSetting('Folder3021');
  FFolder3023 := TAppSettings.GetSetting('Folder3023');
  FFolder3031 := TAppSettings.GetSetting('Folder3031');
  FFolder3041 := TAppSettings.GetSetting('Folder3041');
  FFolder3051 := TAppSettings.GetSetting('Folder3051');
  FFolder3061 := TAppSettings.GetSetting('Folder3061');
  FFolder3071 := TAppSettings.GetSetting('Folder3071');
  FFolder3077 := TAppSettings.GetSetting('Folder3077');
  FFolder3081 := TAppSettings.GetSetting('Folder3081');
  FFolder3098 := TAppSettings.GetSetting('Folder3098');
  FFolder3099 := TAppSettings.GetSetting('Folder3099');

  FMinVIPSale := TAppSettings.GetFloatSetting('MinVIPSale');
  FMaxPayment := TAppSettings.GetFloatSetting('MaxPayment', 1000.00);

  TFile.WriteAllText(TPath.Combine(ItemsFolder, 'start.txt'),'');
end;

destructor TGlobal.Destroy;
begin

  inherited;
end;

{$ENDREGION}

end.
