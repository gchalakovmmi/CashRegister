<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251"/>
<title>TFMP_10_BGR_KL</title>
<script type="text/javascript" src="../jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="../jq.js"></script>
<link href="../style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
	<tr>
	  <td id="param">
		<label><span>!</span>29H (41)	ЗАПОМНЯНЕ НА НАСТРОЙКИТЕ И КЛЮЧЕТАТА ВЪВ FLASH-ПАМЕТТА</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th width="300">Method name</th>
					<th>Short description</th>
				</tr>
				<tr>
					<td><li><a href="CMD_41_0_0.html" name="CMD_41_0_0">CMD_41_0_0</a></li></td>
					<td><pre>
29H (41)	ЗАПОМНЯНЕ НА НАСТРОЙКИТЕ И КЛЮЧЕТАТА ВЪВ FLASH-ПАМЕТТА

	Data field:	
		Switches
	Response:	
		Няма данни

	Switches		8 байта със стойност '0' или '1' - конфигурационните "ключета".

Забележка:

Принтерът няма хардуерни ключета и използува за целта област във флаш-паметта. 
Установяването им става с тази команда. 

ВНИМАНИЕ! Номерацията започва от най-младшия бит.

Командата запомня следните дании в енергонезависимата (flash) памет:
	-	Header и footer (от команда 43).
	-	Текстът на допълнителните типове плащане (от команда 85).
	-	Графичното лого (от команда 115).
	-	Опциите за печат (от команда 43).
	-	Конфигурационните ключета.
	
След RAM ресет стойностите им се възстановяват от тези във флаша.

Switch
	1	Задава скоростта на предаване на серийния порт    
	2	Задава скоростта на предаване на серийния порт    
	3	Задава скоростта на предаване на серийния порт    
	4	- Не се използва
	5	- Не се използва
	6	- Не се използва
	7	- Не се използва
	8
		Изключено	- Bluetooth е в режим DISCOVERABLE
		Включено	- Bluetooth е в режим NON DISCOVERABLE





	**********************************************
	Ключе 1	Ключе 2	Ключе 3		Скорост 
	**********************************************
	     0	     0	     0		1200 bps
	     1	     0	     0		2400 bps
	     0	     1	     0		4800 bps
	     1	     1	     0		9600 bps
	     0	     0	     1		19200 bps
	     1	     0	     1		38400 bps
	     0	     1	     1		57600 bps
	     1	     1	     1		115200 bps
	**********************************************


					</pre></td>
				</tr>

				<tr>
					<td><li><a href="CMD_41_0_1.html" name="CMD_41_0_1">CMD_41_0_1</a></li></td>
					<td><pre>
29H (41)	ЗАПОМНЯНЕ НА НАСТРОЙКИТЕ И КЛЮЧЕТАТА ВЪВ FLASH-ПАМЕТТА

	Data field:	
		Няма данни
	Response:	
		Няма данни

	
Забележка:

Командата запомня следните дании в енергонезависимата (flash) памет:
	-	Header и footer (от команда 43).
	-	Текстът на допълнителните типове плащане (от команда 85).
	-	Графичното лого (от команда 115).
	-	Опциите за печат (от команда 43).
	
След RAM ресет стойностите им се възстановяват от тези във флаша.
					</pre></td>
				</tr>

			</table>
			</div>
		</td>
	</tr>
</table>
<table width="100%">
	<tr>
	  <td id="param">
		<label><span>!</span>2Bh (43) 	УСТАНОВЯВАНЕ НА HEADER И FOOTER И ОПЦИИ ЗА ПЕЧАТ</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th width="300">Method name</th>
					<th>Short description</th>
				</tr>
				<tr>
					<td><li><a href="CMD_43_0_0.html" name="CMD_43_0_0">CMD_43_0_0</a></li></td>
					<td><pre>
2Bh (43) 	УСТАНОВЯВАНЕ НА HEADER И FOOTER И ОПЦИИ ЗА ПЕЧАТ

Този метод се използва за запис.

	Област за данни:	
		ITEM_INDEX
		DATA_VALUE
	Отговор:	
		Зависи от областта за данни


	ITEM_INDEX	
		Един символ със следното значение:

		'0' до '7' 	е номера на линията, която се задава. Линиите на HEADER са с номера от 0 до 5, а тези 
			на FOOTER - 6 и 7.

		'А'	Автоматично форматиране на продажбите като за фактура (4 отделни реда).

		'B'	Задава височината на баркода в пиксели (0.125 mm). Възможни стойности от 24 (3 mm) 
			до 240 (30 mm). Баркодът се печати с команда 84 (54H).

		'D'	Задава плътност на печат. Възможни стойности: 
			'1':	Много блед
			'2':	Блед
			'3':	Нормален
			'4':	Плътен
			'5':	Много плътен

		'E'	Разрешаване / забраняване на печата на общата сума в EUR при първата команда за плащане 
			(53) във фискален бон. По подразбиране печатът е забранен. Опционално командата задава 
			и валидния курс EUR/ЛВ. Синтаксис на данните:
			<Enable>[,Rate]
				Enable	Флаг за забрана / разрешаване на печата. Един байт: '0' или '1'.
				Rate	Обменен курс. Плаващо число с до 8 значещи цифри и 5 десетични знака. 
					Ако липсва, запазва се старата стойност. 
					Ако е 0.00000, то стойност в евро не се печати независимо от Enable.

		'L'	Разрешаване / забраняване печата на графичното лого непосредствено преди HEADER-а. 
			Данните Text са във формат <Enable>,<H>. 
				H е височината на логото в пиксели;
				Enable е един байт със стойност '1' (разрешено) или '0' (забранено);

		'N'	Разрешаване / забраняване на отпечатването на името на департамента в началото на 
			всеки фискален бон.

		'R'	Добавяне на допълнително разстояние между символите в режим "печат на завъртян на 
			90 градуса текст". След буквата следва едно цяло число със стойност от 0 до 4.

		'T'	Разрешаване / забраняване на отпечатването на натрупания ДДС за бона в нормален 
			(не разширен) фискален бон.

		'X'	Разрешаване / забраняване на автоматичното генерирането на импулс за отваряне на 
			чекмедже при команди 53 (35H) и 70 (46H).

		DATA_VALUE	
			Текст до 36 символа, като:

			Ако <Item> е цифра от '0' до '7' - текста от който се състои съответната линия.

			Ако <Item> = 'А' - един символ '0' или '1', като '0' забранява, а '1' разрешава форматирането 
				тип "фактура". Ако е разрешено, тогава за всяка продажба се отпечатват по 4 реда 
				- за име, единична цена, количество и цена с данъчна група.

			Ако <Item>  =  'B' - Число, задаващо височината в на баркода пиксели.
			Ако <Item>  =  'D' - Плътността на печат (от 1 до 5).
			Ако <Item> = 'E' - Връща се Enable,Rate, където 
				- Enable е флагът забранено / разрешено;
				- Rate е текущият програмиран обменен курс.
			Ако <Item> = 'L' - Връща се Enable,H, където H е височината на графичното лого, а Enable е 
				флагът забранено / разрешено.
			Ако <Item> = 'N' - един символ '0' или '1', като '0' забранява, а '1' разрешава отпечатването на 
				името на департамента в началото на всеки фискален бон.
			Ако <Item> = 'R' - цяло число от 0 до 4: Допълнителното разстояние между символите в режим 
				"печат на завъртян на 90 градуса текст".
			Ако <Item> = 'Т' - един символ '0' или '1', като '0' забранява, а '1' разрешава отпечатването на 
				натрупания ДДС в нормален (не разширен) фискален бон.
			Ако <Item> = 'X' - един символ '0' или '1', като '1' забранява, а '0' разрешава автоматичното отваряне 
				на чекмедже при команди 53 (35H) и 70 (46H).

Забележка - неща които трябва да се знаят предварително:
	1. HEADER се състои от 6 реда текст, които се отпечатват в началото на всеки фискален или служебен бон. 
	2. За нормална работа на принтера е необходимо да се зададат поне 2 реда Header.
	3. ЕИК (зададен от команда 98) се печати винаги на трети ред, така че редовете от HEADER-а след втория 
	автоматично се преместват с една позиция надолу.
	4. FOOTER се състои от 2 линии текст, които се отпечатват в края на всеки бон. 
	5. HEADER и FOOTER се центрират автоматично.
	6. Тази команда трябва да се изпълни до 8 пъти, за да се зададат всичките линии на HEADER и FOOTER.
	7. Логото се дефинира с команда 115. 



					</pre></td>
				</tr>

				<tr>
					<td><li><a href="CMD_43_0_1.html" name="CMD_43_0_1">CMD_43_0_1</a></li></td>
					<td><pre>
2Bh (43) 	УСТАНОВЯВАНЕ НА HEADER И FOOTER И ОПЦИИ ЗА ПЕЧАТ

	Област за данни:	
		INP_STR
		
	Отговор:	
		OUTP_STR	Зависи от областта за данни

Забележка - неща които трябва да се знаят предварително:
	1. HEADER се състои от 6 реда текст, които се отпечатват в началото на всеки фискален или служебен бон. 
	2. За нормална работа на принтера е необходимо да се зададат поне 2 реда Header.
	3. ЕИК (зададен от команда 98) се печати винаги на трети ред, така че редовете от HEADER-а след втория 
	автоматично се преместват с една позиция надолу.
	4. FOOTER се състои от 2 линии текст, които се отпечатват в края на всеки бон. 
	5. HEADER и FOOTER се центрират автоматично.
	6. Тази команда трябва да се изпълни до 8 пъти, за да се зададат всичките линии на HEADER и FOOTER.
	7. Логото се дефинира с команда 115. 


	INP_STR	
		Един символ със следното значение:

		'0' до '7' 	е номера на линията, която се задава. Линиите на HEADER са с номера от 0 до 5, а тези 
			на FOOTER - 6 и 7.

		'А'	Автоматично форматиране на продажбите като за фактура (4 отделни реда).

		'B'	Задава височината на баркода в пиксели (0.125 mm). Възможни стойности от 24 (3 mm) 
			до 240 (30 mm). Баркодът се печати с команда 84 (54H).

		'D'	Задава плътност на печат. Възможни стойности: 
			'1':	Много блед
			'2':	Блед
			'3':	Нормален
			'4':	Плътен
			'5':	Много плътен

		'E'	Разрешаване / забраняване на печата на общата сума в EUR при първата команда за плащане 
			(53) във фискален бон. По подразбиране печатът е забранен. Опционално командата задава 
			и валидния курс EUR/ЛВ. Синтаксис на данните:
			<Enable>[,Rate]
				Enable	Флаг за забрана / разрешаване на печата. Един байт: '0' или '1'.
				Rate	Обменен курс. Плаващо число с до 8 значещи цифри и 5 десетични знака. 
					Ако липсва, запазва се старата стойност. 
					Ако е 0.00000, то стойност в евро не се печати независимо от Enable.

		'L'	Разрешаване / забраняване печата на графичното лого непосредствено преди HEADER-а. 
			Данните Text са във формат <Enable>,<H>. 
				H е височината на логото в пиксели;
				Enable е един байт със стойност '1' (разрешено) или '0' (забранено);

		'N'	Разрешаване / забраняване на отпечатването на името на департамента в началото на 
			всеки фискален бон.

		'R'	Добавяне на допълнително разстояние между символите в режим "печат на завъртян на 
			90 градуса текст". След буквата следва едно цяло число със стойност от 0 до 4.

		'T'	Разрешаване / забраняване на отпечатването на натрупания ДДС за бона в нормален 
			(не разширен) фискален бон.

		'X'	Разрешаване / забраняване на автоматичното генерирането на импулс за отваряне на 
			чекмедже при команди 53 (35H) и 70 (46H).

	OUTP_STR	
			Текст до 36 символа, като:

			Ако <INP_STR> е цифра от '0' до '7' - текста от който се състои съответната линия.

			Ако <INP_STR> = 'А' - един символ '0' или '1', като '0' забранява, а '1' разрешава форматирането 
				тип "фактура". Ако е разрешено, тогава за всяка продажба се отпечатват по 4 реда 
				- за име, единична цена, количество и цена с данъчна група.

			Ако <INP_STR>  =  'B' - Число, задаващо височината в на баркода пиксели.
			Ако <INP_STR> = 'C' - един символ '0' или '1', като '0' забранява, а '1' разрешава автоматичното 
			отрязване на бона.
			Ако <INP_STR>  =  'D' - Плътността на печат (от 1 до 5).
			Ако <INP_STR> = 'E' - Връща се Enable,Rate, където 
				- Enable е флагът забранено / разрешено;
				- Rate е текущият програмиран обменен курс.
			Ако <INP_STR> = 'L' - Връща се Enable,H, където H е височината на графичното лого, а Enable е 
				флагът забранено / разрешено.
			Ако <INP_STR> = 'N' - един символ '0' или '1', като '0' забранява, а '1' разрешава отпечатването на 
				името на департамента в началото на всеки фискален бон.
			Ако <INP_STR> = 'R' - цяло число от 0 до 4: Допълнителното разстояние между символите в режим 
				"печат на завъртян на 90 градуса текст".
			Ако <INP_STR> = 'Т' - един символ '0' или '1', като '0' забранява, а '1' разрешава отпечатването на 
				натрупания ДДС в нормален (не разширен) фискален бон.
			Ако <INP_STR> = 'X' - един символ '0' или '1', като '1' забранява, а '0' разрешава автоматичното отваряне 
				на чекмедже при команди 53 (35H) и 70 (46H).



					</pre></td>
				</tr>

			</table>
			</div>
		</td>
	</tr>
</table>
<table width="100%">
	<tr>
	  <td id="param">
		<label><span>!</span>3Ah (58) РЕГИСТРИРАНЕ (ПРОДАЖБА) НА АРТИКУЛ</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th width="300">Method name</th>
					<th>Short description</th>
				</tr>
				<tr>
					<td><li><a href="CMD_58_0_0.html" name="CMD_58_0_0">CMD_58_0_0</a></li></td>
					<td><pre>
3Ah (58) РЕГИСТРИРАНЕ (ПРОДАЖБА) НА АРТИКУЛ


	Област за данни:	
			PLU
			Dept
			Qwan
			Perc
	Отговор:	
			Няма данни

	Продажбата става с показване на клиентския дисплей. 
	Ако дължината на името на артикула е повече от 20, символите след 20-я се отрязват.

	Sign	Незадължителен параметър - един байт със стойност '-'.
	PLU	Това е номер на артикула. Цяло число от 1 до 999999999 (до 9 цифри).
	Dept	Номер на департамент. Цяло число от 1 до 60 включително. 
	Qwan	Количеството на стоката. Дължина до 8 значещи цифри (не повече от 3 след десетичната точка). 
		Произведението (Единична цена)*Qwan се закръгля от принтера до зададения брой десетични знаци и също не трябва 
		да надхвърля 8 значещи цифри.
	Perc	Параметър, показващ стойността на надбавката или отстъпката (в зависимост от знака) в проценти върху 
		текущата продажба. Допустими стойности са от -99.00 % до 99.00 %. Приемат се до 2 десетични знака.




Забележка:
	ФП извършва следните действия:
	•	Прочита се от таблицата с артикулите името, цената и данъчната група на стоката.
	•	Ако продажбата е по департамент и е разрешено с команда 43, подкоманда 'N', отпечатва се името на департамента.
	•	Отпечатва името на артикула, посоченото количество и единичната цена. 
		На втори ред се отпечатва получената цена заедно с буквата, определяща данъчната група. 
		Актуализират се регистрите за натрупани суми и количества на артикули. 
		Ако с команда 43h е зададено форматиране на текста тип фактура, то името на стоката, единичната цена, количеството 
		и цената се отпечатват на отделни редове.
	•	Цената на стоката се прибавя към натрупаните суми в регистрите в оперативната памет. 
		В случай на препълване се установяват съответните битове от статус полето. 
	•	Ако има отстъпка или надбавка, тя се отпечатва на отделен ред и се добавя в предвидени за това регистри на принтера. 
		Стойностите за целия ден се отпечатват при дневния финансов отчет.
	•	Ако е указан департамент, натрупаната стойност се прибавя към него. Надбавките и отстъпките, ако има такива, се 
		отчитат.

	Командата няма да бъде изпълнена успешно, ако:
	•	Не програмиран артикул с посочения номер.
	•	Не е отворен фискален бон.
	•	Вече са направени максималния брой продажби за един бон (512).
	•	Командата (35h) е изпълнена успешно.
	•	Сумата по някоя от данъчните групи става отрицателна.
	•	Сумата от надбавки или отстъпки в рамките на бона става отрицателна.
	•	КЛЕН е пълна.
					</pre></td>
				</tr>

				<tr>
					<td><li><a href="CMD_58_0_1.html" name="CMD_58_0_1">CMD_58_0_1</a></li></td>
					<td><pre>
3Ah (58) РЕГИСТРИРАНЕ (ПРОДАЖБА) НА АРТИКУЛ


	Област за данни:	
			PLU
			Dept
			Qwan
			AbsSum
	Отговор:	
			Няма данни

	Продажбата става с показване на клиентския дисплей. 
	Ако дължината на името на артикула е повече от 20, символите след 20-я се отрязват.

	Sign	Незадължителен параметър - един байт със стойност '-'.
	PLU	Това е номер на артикула. Цяло число от 1 до 999999999 (до 9 цифри).
	Dept	Номер на департамент. Цяло число от 1 до 60 включително. 
	Qwan	Количеството на стоката. Дължина до 8 значещи цифри (не повече от 3 след десетичната точка). 
		Произведението (Единична цена)*Qwan се закръгля от принтера до зададения брой десетични знаци и 
		също не трябва да надхвърля 8 значещи цифри.
	AbsSum	Това е параметър, показващ стойността на надбавката или отстъпката (в зависимост от знака) като сума. 
		Не е допустима отстъпка със стойност по-голяма от стойността на продажбата.


Забележка:
	ФП извършва следните действия:
	•	Прочита се от таблицата с артикулите името, цената и данъчната група на стоката.
	•	Ако продажбата е по департамент и е разрешено с команда 43, подкоманда 'N', отпечатва се името на департамента.
	•	Отпечатва името на артикула, посоченото количество и единичната цена. 
		На втори ред се отпечатва получената цена заедно с буквата, определяща данъчната група. 
		Актуализират се регистрите за натрупани суми и количества на артикули. 
		Ако с команда 43h е зададено форматиране на текста тип фактура, то името на стоката, единичната цена, количеството 
		и цената се отпечатват на отделни редове.
	•	Цената на стоката се прибавя към натрупаните суми в регистрите в оперативната памет. 
		В случай на препълване се установяват съответните битове от статус полето. 
	•	Ако има отстъпка или надбавка, тя се отпечатва на отделен ред и се добавя в предвидени за това регистри на принтера. 
		Стойностите за целия ден се отпечатват при дневния финансов отчет.
	•	Ако е указан департамент, натрупаната стойност се прибавя към него. Надбавките и отстъпките, ако има такива, се 
		отчитат.

	Командата няма да бъде изпълнена успешно, ако:
	•	Не програмиран артикул с посочения номер.
	•	Не е отворен фискален бон.
	•	Вече са направени максималния брой продажби за един бон (512).
	•	Командата (35h) е изпълнена успешно.
	•	Сумата по някоя от данъчните групи става отрицателна.
	•	Сумата от надбавки или отстъпки в рамките на бона става отрицателна.
	•	КЛЕН е пълна.
					</pre></td>
				</tr>

				<tr>
					<td><li><a href="CMD_58_0_2.html" name="CMD_58_0_2">CMD_58_0_2</a></li></td>
					<td><pre>
3Ah (58) РЕГИСТРИРАНЕ (ПРОДАЖБА) НА АРТИКУЛ


	Област за данни:	
			PLU
			Dept
			Qwan
	Отговор:	
			Няма данни

	Продажбата става с показване на клиентския дисплей. 
	Ако дължината на името на артикула е повече от 20, символите след 20-я се отрязват.

	Sign	Незадължителен параметър - един байт със стойност '-'.
	PLU	Това е номер на артикула. Цяло число от 1 до 999999999 (до 9 цифри).
	Dept	Номер на департамент. Цяло число от 1 до 60 включително. 
	Qwan	Количеството на стоката. Дължина до 8 значещи цифри (не повече от 3 след десетичната точка). 
		Произведението (Единична цена)*Qwan се закръгля от принтера до зададения брой десетични знаци и 
		също не трябва да надхвърля 8 значещи цифри.




Забележка:
	ФП извършва следните действия:
	•	Прочита се от таблицата с артикулите името, цената и данъчната група на стоката.
	•	Ако продажбата е по департамент и е разрешено с команда 43, подкоманда 'N', отпечатва се името на департамента.
	•	Отпечатва името на артикула, посоченото количество и единичната цена. 
		На втори ред се отпечатва получената цена заедно с буквата, определяща данъчната група. 
		Актуализират се регистрите за натрупани суми и количества на артикули. 
		Ако с команда 43h е зададено форматиране на текста тип фактура, то името на стоката, единичната цена, количеството 
		и цената се отпечатват на отделни редове.
	•	Цената на стоката се прибавя към натрупаните суми в регистрите в оперативната памет. 
		В случай на препълване се установяват съответните битове от статус полето. 
	•	Ако има отстъпка или надбавка, тя се отпечатва на отделен ред и се добавя в предвидени за това регистри на принтера. 
		Стойностите за целия ден се отпечатват при дневния финансов отчет.
	•	Ако е указан департамент, натрупаната стойност се прибавя към него. Надбавките и отстъпките, ако има такива, се 
		отчитат.

	Командата няма да бъде изпълнена успешно, ако:
	•	Не програмиран артикул с посочения номер.
	•	Не е отворен фискален бон.
	•	Вече са направени максималния брой продажби за един бон (512).
	•	Командата (35h) е изпълнена успешно.
	•	Сумата по някоя от данъчните групи става отрицателна.
	•	Сумата от надбавки или отстъпки в рамките на бона става отрицателна.
	•	КЛЕН е пълна.
					</pre></td>
				</tr>

				<tr>
					<td><li><a href="CMD_58_1_0.html" name="CMD_58_1_0">CMD_58_1_0</a></li></td>
					<td><pre>
3Ah (58) РЕГИСТРИРАНЕ (ПРОДАЖБА) НА АРТИКУЛ


	Област за данни:	
			PLU
			Qwan
			Perc
	Отговор:	
			Няма данни

	Продажбата става с показване на клиентския дисплей. 
	Ако дължината на името на артикула е повече от 20, символите след 20-я се отрязват.

	Sign	Незадължителен параметър - един байт със стойност '-'.
	PLU	Това е номер на артикула. Цяло число от 1 до 999999999 (до 9 цифри).
	Qwan	Количеството на стоката. Дължина до 8 значещи цифри (не повече от 3 след десетичната точка). 
		Произведението (Единична цена)*Qwan се закръгля от принтера до зададения брой десетични знаци и също 
		не трябва да надхвърля 8 значещи цифри.
	Perc	Параметър, показващ стойността на надбавката или отстъпката (в зависимост от знака) в проценти върху 
		текущата продажба. Допустими стойности са от -99.00 % до 99.00 %. Приемат се до 2 десетични знака.




Забележка:
	ФП извършва следните действия:
	•	Прочита се от таблицата с артикулите името, цената и данъчната група на стоката.
	•	Ако продажбата е по департамент и е разрешено с команда 43, подкоманда 'N', отпечатва се името на департамента.
	•	Отпечатва името на артикула, посоченото количество и единичната цена. 
		На втори ред се отпечатва получената цена заедно с буквата, определяща данъчната група. 
		Актуализират се регистрите за натрупани суми и количества на артикули. 
		Ако с команда 43h е зададено форматиране на текста тип фактура, то името на стоката, единичната цена, количеството и 
		цената се отпечатват на отделни редове.
	•	Цената на стоката се прибавя към натрупаните суми в регистрите в оперативната памет. 
		В случай на препълване се установяват съответните битове от статус полето. 
	•	Ако има отстъпка или надбавка, тя се отпечатва на отделен ред и се добавя в предвидени за това регистри на принтера. 
		Стойностите за целия ден се отпечатват при дневния финансов отчет.
	•	Ако е указан департамент, натрупаната стойност се прибавя към него. Надбавките и отстъпките, ако има такива, се отчитат.

	Командата няма да бъде изпълнена успешно, ако:
	•	Не програмиран артикул с посочения номер.
	•	Не е отворен фискален бон.
	•	Вече са направени максималния брой продажби за един бон (512).
	•	Командата (35h) е изпълнена успешно.
	•	Сумата по някоя от данъчните групи става отрицателна.
	•	Сумата от надбавки или отстъпки в рамките на бона става отрицателна.
	•	КЛЕН е пълна.
					</pre></td>
				</tr>

				<tr>
					<td><li><a href="CMD_58_1_1.html" name="CMD_58_1_1">CMD_58_1_1</a></li></td>
					<td><pre>
3Ah (58) РЕГИСТРИРАНЕ (ПРОДАЖБА) НА АРТИКУЛ


	Област за данни:	
			PLU
			Qwan
			AbsSum
	Отговор:	
			Няма данни

	Продажбата става с показване на клиентския дисплей. 
	Ако дължината на името на артикула е повече от 20, символите след 20-я се отрязват.

	Sign	Незадължителен параметър - един байт със стойност '-'.
	PLU	Това е номер на артикула. Цяло число от 1 до 999999999 (до 9 цифри).
	Qwan	Количеството на стоката. Дължина до 8 значещи цифри (не повече от 3 след десетичната точка). 
		Произведението (Единична цена)*Qwan се закръгля от принтера до зададения брой десетични знаци и 
		също не трябва да надхвърля 8 значещи цифри.
	AbsSum	Това е параметър, показващ стойността на надбавката или отстъпката (в зависимост от знака) като сума. 
		Не е допустима отстъпка със стойност по-голяма от стойността на продажбата.




Забележка:
	ФП извършва следните действия:
	•	Прочита се от таблицата с артикулите името, цената и данъчната група на стоката.
	•	Ако продажбата е по департамент и е разрешено с команда 43, подкоманда 'N', отпечатва се името на департамента.
	•	Отпечатва името на артикула, посоченото количество и единичната цена. 
		На втори ред се отпечатва получената цена заедно с буквата, определяща данъчната група. 
		Актуализират се регистрите за натрупани суми и количества на артикули. 
		Ако с команда 43h е зададено форматиране на текста тип фактура, то името на стоката, единичната цена, количеството и 
		цената се отпечатват на отделни редове.
	•	Цената на стоката се прибавя към натрупаните суми в регистрите в оперативната памет. 
		В случай на препълване се установяват съответните битове от статус полето. 
	•	Ако има отстъпка или надбавка, тя се отпечатва на отделен ред и се добавя в предвидени за това регистри на принтера. 
		Стойностите за целия ден се отпечатват при дневния финансов отчет.
	•	Ако е указан департамент, натрупаната стойност се прибавя към него. Надбавките и отстъпките, ако има такива, се отчитат.

	Командата няма да бъде изпълнена успешно, ако:
	•	Не програмиран артикул с посочения номер.
	•	Не е отворен фискален бон.
	•	Вече са направени максималния брой продажби за един бон (512).
	•	Командата (35h) е изпълнена успешно.
	•	Сумата по някоя от данъчните групи става отрицателна.
	•	Сумата от надбавки или отстъпки в рамките на бона става отрицателна.
	•	КЛЕН е пълна.
					</pre></td>
				</tr>

				<tr>
					<td><li><a href="CMD_58_1_2.html" name="CMD_58_1_2">CMD_58_1_2</a></li></td>
					<td><pre>
3Ah (58) РЕГИСТРИРАНЕ (ПРОДАЖБА) НА АРТИКУЛ


	Област за данни:	
			PLU
			Qwan
	Отговор:	
			Няма данни

	Продажбата става с показване на клиентския дисплей. 
	Ако дължината на името на артикула е повече от 20, символите след 20-я се отрязват.

	Sign	Незадължителен параметър - един байт със стойност '-'.
	PLU	Това е номер на артикула. Цяло число от 1 до 999999999 (до 9 цифри).
	Qwan	Количеството на стоката. Дължина до 8 значещи цифри (не повече от 3 след десетичната точка). 
		Произведението (Единична цена)*Qwan се закръгля от принтера до зададения брой десетични знаци и 
		също не трябва да надхвърля 8 значещи цифри.




Забележка:
	ФП извършва следните действия:
	•	Прочита се от таблицата с артикулите името, цената и данъчната група на стоката.
	•	Ако продажбата е по департамент и е разрешено с команда 43, подкоманда 'N', отпечатва се името на департамента.
	•	Отпечатва името на артикула, посоченото количество и единичната цена. 
		На втори ред се отпечатва получената цена заедно с буквата, определяща данъчната група. 
		Актуализират се регистрите за натрупани суми и количества на артикули. 
		Ако с команда 43h е зададено форматиране на текста тип фактура, то името на стоката, единичната цена, количеството и 
		цената се отпечатват на отделни редове.
	•	Цената на стоката се прибавя към натрупаните суми в регистрите в оперативната памет. 
		В случай на препълване се установяват съответните битове от статус полето. 
	•	Ако има отстъпка или надбавка, тя се отпечатва на отделен ред и се добавя в предвидени за това регистри на принтера. 
		Стойностите за целия ден се отпечатват при дневния финансов отчет.
	•	Ако е указан департамент, натрупаната стойност се прибавя към него. Надбавките и отстъпките, ако има такива, се отчитат.

	Командата няма да бъде изпълнена успешно, ако:
	•	Не програмиран артикул с посочения номер.
	•	Не е отворен фискален бон.
	•	Вече са направени максималния брой продажби за един бон (512).
	•	Командата (35h) е изпълнена успешно.
	•	Сумата по някоя от данъчните групи става отрицателна.
	•	Сумата от надбавки или отстъпки в рамките на бона става отрицателна.
	•	КЛЕН е пълна.
					</pre></td>
				</tr>

			</table>
			</div>
		</td>
	</tr>
</table>
<table width="100%">
	<tr>
	  <td id="param">
		<label><span>!</span>3Dh (61)	УСТАНОВЯВАНЕ НА ДАТАТА И ЧАСА</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th width="300">Method name</th>
					<th>Short description</th>
				</tr>
				<tr>
					<td><li><a href="CMD_61_0_0.html" name="CMD_61_0_0">CMD_61_0_0</a></li></td>
					<td><pre>
3Dh (61)	УСТАНОВЯВАНЕ НА ДАТАТА И ЧАСА

	Област за данни:	
		TRGT_DATE	DD-MM-YY
		TRGT_TIME	HH:MM[:SS]
	Отговор:	Няма данни



Забележка:
Не може да се установява дата, по-ранна от датата на последния запис във фискалната памет. 
Предвидено е да се работи до 2099 година включително. 

След RESET на паметта командата трябва задължително да се изпълни, за да се продължи нормалната работа, при което се извършва 
RESET запис във фискалната памет.

Внимание! Важна промяна спрямо версиите на фискалния принтер без КЛЕН!
Не е възможно задаване на дата и час по-ранна от последния отпечатан документ, записан в КЛЕН. 
Това е с цел коректно търсене на документи от КЛЕН по дата и час за печат или изтегляне по серийния порт като текст. 

					</pre></td>
				</tr>

			</table>
			</div>
		</td>
	</tr>
</table>
<table width="100%">
	<tr>
	  <td id="param">
		<label><span>!</span>42h (66) 	ЗАДАВАНЕ НА ИНТЕРВАЛ ДОПУСТИМИ НОМЕРА НА ФАКТУРА</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th width="300">Method name</th>
					<th>Short description</th>
				</tr>
				<tr>
					<td><li><a href="CMD_66_0_0.html" name="CMD_66_0_0">CMD_66_0_0</a></li></td>
					<td><pre>
42h (66) 	ЗАДАВАНЕ НА ИНТЕРВАЛ ДОПУСТИМИ НОМЕРА НА ФАКТУРА

	Област за данни:	
			START_NUM
			END_NUM
	
	Отговор:		Няма


	START_NUM	Задава начална стойност на интервала. Цяло число до 10 цифри. 
	END_NUM	Задава крайна стойност на интервала. Цяло число до 10 цифри.


Забележка:
1. START_NUM трябва да е по-малко или равно на END_NUM. 
2. При успешно изпълнена команда текущият номер на фактура става START_NUM.

Командата е допустима, ако:
-	Не е изпълнявана след пускане на принтера в експлоатация.
-	Извършено е нулиране на RAM, поради което информацията за текущия брояч и допустимия 
	интервал е загубена.
-	С нарастванев на брояча на фактурите той е излязъл вън от допустимия интервал. Трябва да се 
	зададе нов интервал.

					</pre></td>
				</tr>

				<tr>
					<td><li><a href="CMD_66_0_1.html" name="CMD_66_0_1">CMD_66_0_1</a></li></td>
					<td><pre>
42h (66) 	ЗАДАВАНЕ НА ИНТЕРВАЛ ДОПУСТИМИ НОМЕРА НА ФАКТУРА

Принтерът връща текущия интервал и брояч.


	Област за данни:		Няма
	
	Отговор:	
			START_NUM
			END_NUM
			CURRENT


	START_NUM	Задава начална стойност на интервала. Цяло число до 10 цифри. 
	END_NUM	Задава крайна стойност на интервала. Цяло число до 10 цифри.
	CURRENT	Текущата стойност на брояча на фактурите. Цяло число с 10 цифри.


Забележка:
					</pre></td>
				</tr>

			</table>
			</div>
		</td>
	</tr>
</table>
<table width="100%">
	<tr>
	  <td id="param">
		<label><span>!</span>53h (83)	УСТАНОВЯВАНЕ НА ДЕСЕТИЧНИ ЗНАЦИ, ВАЛУТА И ДАНЪЧНИТЕ СТАВКИ</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th width="300">Method name</th>
					<th>Short description</th>
				</tr>
				<tr>
					<td><li><a href="CMD_83_0_0.html" name="CMD_83_0_0">CMD_83_0_0</a></li></td>
					<td><pre>
53h (83)	УСТАНОВЯВАНЕ НА ДЕСЕТИЧНИ ЗНАЦИ, ВАЛУТА И ДАНЪЧНИТЕ СТАВКИ

	Област за данни:	
			INPUT_Multiplier
			INPUT_Decimals
			INPUT_Currency
			INPUT_EnabledT
			INPUT_TaxA
			INPUT_TaxB
			INPUT_TaxC
			INPUT_TaxD
			INPUT_TaxE
			INPUT_TaxF
			INPUT_TaxG
			INPUT_TaxH
	Отговор:	
			OUTPUT_Multiplier
			OUTPUT_Decimals
			OUTPUT_Currency
			OUTPUT_EnabledT
			OUTPUT_TaxA
			OUTPUT_TaxB
			OUTPUT_TaxC
			OUTPUT_TaxD
			OUTPUT_TaxE
			OUTPUT_TaxF
			OUTPUT_TaxG
			OUTPUT_TaxH

	Multiplier		Множител - между 0 и 3 и показва степента на 10 преди да се умножи с входното или изходното число. 
			В момента е деактивиран и не се използува.
	Decimals		Това е един байт със стойност между 0 и 2 и показва мястото където да се сложи десетичната запетая.
	Currency		Името на валутата. До 6 байта.
	EnabledT		8 байта със възможна стойност '0' или '1', определящи дали съответната данъчна група е 
			забранена ('0') или разрешена ('1').
	TaxX		Стойността на данъчните ставки.


Забележка:

Ако един от параметрите трябва да бъде указан, то тогава и останалите трябва да се зададат.
Установяването на нови данъчни ставки е разрешено само преди издаването на първия клиентски фискален бон за деня.
Преди фискализация данните от командата се пазят само в оперативната памет и могат да се променят неограничен брой пъти.

					</pre></td>
				</tr>

				<tr>
					<td><li><a href="CMD_83_0_1.html" name="CMD_83_0_1">CMD_83_0_1</a></li></td>
					<td><pre>
53h (83)	УСТАНОВЯВАНЕ НА ДЕСЕТИЧНИ ЗНАЦИ, ВАЛУТА И ДАНЪЧНИТЕ СТАВКИ

	Област за данни:	Няма.
	Отговор:	
			OUTPUT_Multiplier
			OUTPUT_Decimals
			OUTPUT_Currency
			OUTPUT_EnabledT
			OUTPUT_TaxA
			OUTPUT_TaxB
			OUTPUT_TaxC
			OUTPUT_TaxD
			OUTPUT_TaxE
			OUTPUT_TaxF
			OUTPUT_TaxG
			OUTPUT_TaxH

	Multiplier		Множител - между 0 и 3 и показва степента на 10 преди да се умножи с входното или изходното число. 
			В момента е деактивиран и не се използува.
	Decimals		Това е един байт със стойност между 0 и 2 и показва мястото където да се сложи десетичната запетая.
	Currency		Името на валутата. До 6 байта.
	EnabledT		8 байта със възможна стойност '0' или '1', определящи дали съответната данъчна група е 
			забранена ('0') или разрешена ('1').
	TaxX		Стойността на данъчните ставки.


Забележка:

Ако един от параметрите трябва да бъде указан, то тогава и останалите трябва да се зададат.
Установяването на нови данъчни ставки е разрешено само преди издаването на първия клиентски фискален бон за деня.
Преди фискализация данните от командата се пазят само в оперативната памет и могат да се променят неограничен брой пъти.

					</pre></td>
				</tr>

			</table>
			</div>
		</td>
	</tr>
</table>
<table width="100%">
	<tr>
	  <td id="param">
		<label><span>!</span>57H (87)	ПРОГРАМИРАНЕ НА ИМЕ НА ДЕПАРТАМЕНТ</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th width="300">Method name</th>
					<th>Short description</th>
				</tr>
				<tr>
					<td><li><a href="CMD_87_0_0.html" name="CMD_87_0_0">CMD_87_0_0</a></li></td>
					<td><pre>
57H (87)	ПРОГРАМИРАНЕ НА ИМЕ НА ДЕПАРТАМЕНТ

	Област за данни:	
			Dept
			TaxGr
			Line1
			Line2
	Отговор:	
			Няма данни

	Dept		Номер на департамент. Цяло число от 1 до 60.
	TaxGr		Данъчна група, асоциирана с департамента.
	Line1		Име или поясняващ текст за департамента. До 28 символа.
	Line2		Име или поясняващ текст за департамента (втори ред) до 34 символа.


Забележка:

Командата може да се изпълни само ако за департамента не са издавани фискални бонове след последния Z-отчет. 
При нов принтер или след RAM ресет имената на департаментите са празни. 
Програмираното име се печати в разширения дневен финансов отчет с печат на департаментите (команда 117) и при 
желание в началото на всеки фискален бон.

					</pre></td>
				</tr>

				<tr>
					<td><li><a href="CMD_87_0_1.html" name="CMD_87_0_1">CMD_87_0_1</a></li></td>
					<td><pre>
57H (87)	ПРОГРАМИРАНЕ НА ИМЕ НА ДЕПАРТАМЕНТ

	Област за данни:	
			Dept
			TaxGr
			Line1
	Отговор:	
			Няма данни

	Dept		Номер на департамент. Цяло число от 1 до 60.
	TaxGr		Данъчна група, асоциирана с департамента.
	Line1		Име или поясняващ текст за департамента. До 28 символа.


Забележка:

Командата може да се изпълни само ако за департамента не са издавани фискални бонове след последния Z-отчет. 
При нов принтер или след RAM ресет имената на департаментите са празни. 
Програмираното име се печати в разширения дневен финансов отчет с печат на департаментите (команда 117) и при 
желание в началото на всеки фискален бон.

					</pre></td>
				</tr>

			</table>
			</div>
		</td>
	</tr>
</table>
<table width="100%">
	<tr>
	  <td id="param">
		<label><span>!</span>65h (101)	ЗАДАВАНЕ НА ОПЕРАТОРСКА ПАРОЛА</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th width="300">Method name</th>
					<th>Short description</th>
				</tr>
				<tr>
					<td><li><a href="CMD_101_0_0.html" name="CMD_101_0_0">CMD_101_0_0</a></li></td>
					<td><pre>
65h (101)	ЗАДАВАНЕ НА ОПЕРАТОРСКА ПАРОЛА

	Област за данни:	
			OpCode
			OldPwd
			NewPwd
	Отговор:		
			Няма данни

	OpCode		Код на оператор. От 1 до 16.
	OldPwd		Стара парола (4 до 8 цифри).
	NewPwd		Нова парола (4 до 8 цифри).


Забележка:

Задава една от шестнайсетте операторски пароли. 
Паролата ще бъде поискана при отваряне на фискален бон. 
При три грешни опита за задаване на парола принтерът блокира и трябва да се изключи и включи 
за продължаване на работата.
След инициализация или нулиране на оперативната памет всички пароли са `0000`.

					</pre></td>
				</tr>

			</table>
			</div>
		</td>
	</tr>
</table>
<table width="100%">
	<tr>
	  <td id="param">
		<label><span>!</span>66h (102)	ЗАДАВАНЕ НА ИМЕ НА ОПЕРАТОР</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th width="300">Method name</th>
					<th>Short description</th>
				</tr>
				<tr>
					<td><li><a href="CMD_102_0_0.html" name="CMD_102_0_0">CMD_102_0_0</a></li></td>
					<td><pre>
66h (102)	ЗАДАВАНЕ НА ИМЕ НА ОПЕРАТОР

	Област за данни:	
			OpCode
			Pwd
			OpName
	Отговор:	
			Няма данни

	OpCode		Код на оператор. От 1 до 16.
	Pwd		Парола (4 до 8 цифри).
	OpName		Име на оператор (до 24 символа).


Забележка:

Задава едно от шестнайсетте имена на оператори. 
Номерът и името на оператора се отпечатва в началото на всеки фискален (клиентски) бон. 
При три грешни пароли принтерът блокира и трябва да се изключи и включи за продължаване на работата.
След инициализация или нулиране на оперативната памет и шестнайсетте имена на оператори са празни.

					</pre></td>
				</tr>

			</table>
			</div>
		</td>
	</tr>
</table>
<table width="100%">
	<tr>
	  <td id="param">
		<label><span>!</span>73h (115)	ПРОГРАМИРАНЕ НА ГРАФИЧНО ЛОГО</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th width="300">Method name</th>
					<th>Short description</th>
				</tr>
				<tr>
					<td><li><a href="CMD_115_0_0.html" name="CMD_115_0_0">CMD_115_0_0</a></li></td>
					<td><pre>
73h (115)	ПРОГРАМИРАНЕ НА ГРАФИЧНО ЛОГО

	Област за данни:	
			RowNum
			RowData

	Отговор:
			Няма

	RowNum		Показва реда, който програмираме. Число от 0 до 95.
	RowData		Графични данни. 
			Задават се в шестнайсетичен вид, два символа за всеки байт информация. 
			Дължината на данните е до 54 байта, ако са по-малко, се допълват автоматично с 00.
	

Забележка:
Командата дава възможност за дефиниране на графично лого с размер до 54x12mm (432x96 точки) по  желание на потребителя. 
Печатът му се активизира с команда 43. 
Със същата команда се задава и вертикалния му размер. 
За дефиниране на цялото лого командата трябва да се изпълни до 96 пъти, веднъж за всеки ред. 
При ресет на RAM логото се зарежда от флаш-паметта. 
Програмираното с команда 115 лого може да се прехвърли във флаш-паметта с команда 41.
					</pre></td>
				</tr>

				<tr>
					<td><li><a href="CMD_115_1_0.html" name="CMD_115_1_0">CMD_115_1_0</a></li></td>
					<td><pre>
73h (115)	ПРОГРАМИРАНЕ НА ГРАФИЧНО ЛОГО

	Област за данни:	
			RowNum

	Отговор:
			RowData

	RowNum		Показва реда, който програмираме. Число от 0 до 95.
	RowData		Графични данни. 
			Задават се в шестнайсетичен вид, два символа за всеки байт информация. 
			Дължината на данните е до 54 байта, ако са по-малко, се допълват автоматично с 00.
	

Забележка:
Командата дава възможност за дефиниране на графично лого с размер до 54x12mm (432x96 точки) по  желание на потребителя. 
Печатът му се активизира с команда 43. 
Със същата команда се задава и вертикалния му размер. 
За дефиниране на цялото лого командата трябва да се изпълни до 96 пъти, веднъж за всеки ред. 
При ресет на RAM логото се зарежда от флаш-паметта. 
Програмираното с команда 115 лого може да се прехвърли във флаш-паметта с команда 41.
					</pre></td>
				</tr>

			</table>
			</div>
		</td>
	</tr>
</table>
<table width="100%">
	<tr>
	  <td id="param">
		<label><span>!</span>78h (120) ИЗКЛЮЧВАНЕ НА ПРИНТЕРА</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th width="300">Method name</th>
					<th>Short description</th>
				</tr>
				<tr>
					<td><li><a href="CMD_120_0_0.html" name="CMD_120_0_0">CMD_120_0_0</a></li></td>
					<td><pre>
78h (120) ИЗКЛЮЧВАНЕ НА ПРИНТЕРА

	Област за данни:		Няма данни
	Отговор:			FP_Answer

	FP_Answer		Съдържа стринга 'OFF'.


Забележка:
Принтерът се изключва (евентуално след довършване на печата). 
					</pre></td>
				</tr>

			</table>
			</div>
		</td>
	</tr>
</table>
</body>
</html>
