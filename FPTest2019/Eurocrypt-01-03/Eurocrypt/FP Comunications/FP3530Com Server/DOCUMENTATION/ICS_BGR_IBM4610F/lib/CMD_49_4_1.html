
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251"/>
<title>int FunctionName(a, [b])</title>
<script type="text/javascript" src="../jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="../jq.js"></script>
<link href="../style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
	<tr>
	  <td><h1>CMD_49_4_1</h1></td>
	</tr>
	<tr>
	  <td id="descr">
			<label><span>!</span> Description</label>
			<h2><pre>31h (49)	РЕГИСТРИРАНЕ (ПРОДАЖБА) НА СТОКА

	Област за данни:	
		L1
		Dept
		Price
		Qwan
		AbsSum
	Отговор:	
		Няма данни

	L1	Текст до 36 байта съдържащ ред, описващ продажбата
	Dept	Номер на департамент. Цяло число от 1 до 60 включително. 
		Продажбата се причислява към данъчната група, с която е асоцииран департаментът при програмирането му.
	Price	Това е единичната цена и е до 8 значещи цифри. Ако ще правите войд - цената трябва да е със знак "-",т.е. по-малка от нула.
	Qwan	Параметър, задаващ количеството на стоката. По подразбиране е 1.000. 
		Дължина до 8 значещи цифри (не повече от 3 след десетичната точка). 
		Произведението Price*Qwan се закръгля от принтера до зададения брой десетични знаци и също не трябва да надхвърля 8 значещи цифри.
	AbsSum	Това е незадължителен параметър, показващ стойността на надбавката или отстъпката (в зависимост от знака) като сума. 
		Не е допустима отстъпка със стойност по-голяма от стойността на продажбата.

ФП извършва следните действия:
	•	Ако продажбата е по департамент и е разрешено с команда 43, подкоманда 'N', отпечатва се името на департамента.
	•	Текстът описващ продажбата се отпечатва заедно с цената и кода на данъчната група. Ако има зададено количество, информацията за него също се отпечатва.
	•	Цената на стоката се прибавя към натрупаните суми в регистрите в оперативната памет. В случай на препълване се установяват съответните битове от статус полето. 
	•	Ако има отстъпка или надбавка, тя се отпечатва на отделен ред и се добавя в предвидени за това регистри на принтера. Стойностите за целия ден се отпечатват при дневния финансов отчет.
	•	Ако е указан департамент, натрупаната стойност се прибавя към него. Надбавките и отстъпките, ако има такива, се отчитат.

Командата няма да бъде изпълнена успешно, ако:
	•	Не е отворен фискален бон.
	•	Вече са направени максималния брой продажби за един бон (512).
	•	Командата (35h) е изпълнена успешно.
	•	Сумата по някоя от данъчните групи става отрицателна.
	•	Сумата от надбавки или отстъпки в рамките на бона става отрицателна.
	•	КЛЕН е пълна.

ВНИМАНИЕ!!! 
За да се осъществи успешен войд - трябва да изпълните съвсем точно последната продажба (дори и текста), като цената трябва да е със знак "-",т.е. по-малка от нула.</pre></h2>
		</td>
	</tr>
	<tr>
	  <td id="param">
			<label><span>!</span>Parameters</label>
			<div>
			<table width="100%" border="1">
				<tr>
					<th>Parameter</th>
					<th>Parameter mode</th>
					<th>Parameter type</th>
					<th>Description</th>
				</tr>
			<tr>
				<td id="col1">L1</td>
				<td id="col2">[IN]</td>
				<td id="col3">[STRING]</td>
				<td id="def"><pre>L1	Текст до 36 байта съдържащ ред, описващ продажбата</pre>

				<label><span>!</span>Error support</label>
				<div>			<table width="100%" border="1">
				<tr>
					<th>Error value</th>
					<th>Verification type</th>
					<th>Description</th>
				</tr>
			<tr>
				<td class="col1">-10500</td>
				<td class="VerificationType">Проверка за наличие на входящ параметър.</td>
				<td class="ErrDescription">Missing input parameter.
</td>
			</tr>
			<tr>
				<td class="col1">-10502</td>
				<td class="VerificationType">Проверка за превишаване на горна граница на дължината във входния параметър.</td>
				<td class="ErrDescription">Wrong length - input data.
</td>
			</tr>
			</table>
</div>
</td>
			</tr>
			<tr>
				<td id="col1">Dept</td>
				<td id="col2">[IN]</td>
				<td id="col3">[STRING]</td>
				<td id="def"><pre>Dept

Номер на департамент. Цяло число от 1 до 60 включително. 
Продажбата се причислява към данъчната група, с която е асоцииран департаментът при програмирането му.</pre>

				<label><span>!</span>Error support</label>
				<div>			<table width="100%" border="1">
				<tr>
					<th>Error value</th>
					<th>Verification type</th>
					<th>Description</th>
				</tr>
			<tr>
				<td class="col1">-10500</td>
				<td class="VerificationType">Проверка за наличие на входящ параметър.</td>
				<td class="ErrDescription">Missing input parameter.
</td>
			</tr>
			<tr>
				<td class="col1">-10511</td>
				<td class="VerificationType">Проверка дали входния параметър превишава дадена горна граница със стойност от тип цяло число.</td>
				<td class="ErrDescription">Wrong input data.
</td>
			</tr>
			<tr>
				<td class="col1">-10512</td>
				<td class="VerificationType">Проверка дали входния параметър превишава дадена долна граница със стойност от тип цяло число.</td>
				<td class="ErrDescription">Wrong input data.
</td>
			</tr>
			</table>
</div>
</td>
			</tr>
			<tr>
				<td id="col1">Price</td>
				<td id="col2">[IN]</td>
				<td id="col3">[STRING]</td>
				<td id="def"><pre>Price	

Това е единичната цена и е до 8 значещи цифри. 
Ако ще правите войд - цената трябва да е със знак "-",т.е. по-малка от нула.</pre>

				<label><span>!</span>Error support</label>
				<div>			<table width="100%" border="1">
				<tr>
					<th>Error value</th>
					<th>Verification type</th>
					<th>Description</th>
				</tr>
			<tr>
				<td class="col1">-10500</td>
				<td class="VerificationType">Проверка за наличие на входящ параметър.</td>
				<td class="ErrDescription">Missing input parameter.
</td>
			</tr>
			<tr>
				<td class="col1">-10506</td>
				<td class="VerificationType">Проверка дали входния параметър превишава дадена горна граница със стойност от тип реално число.</td>
				<td class="ErrDescription">Wrong input data.
</td>
			</tr>
			</table>
</div>
</td>
			</tr>
			<tr>
				<td id="col1">Qwan</td>
				<td id="col2">[IN]</td>
				<td id="col3">[STRING]</td>
				<td id="def"><pre>Qwan	

Параметър, задаващ количеството на стоката. По подразбиране е 1.000. 
Дължина до 8 значещи цифри (не повече от 3 след десетичната точка). 
Произведението Price*Qwan се закръгля от принтера до зададения брой десетични знаци и също не трябва да надхвърля 
8 значещи цифри.</pre>

				<label><span>!</span>Error support</label>
				<div>			<table width="100%" border="1">
				<tr>
					<th>Error value</th>
					<th>Verification type</th>
					<th>Description</th>
				</tr>
			<tr>
				<td class="col1">-10500</td>
				<td class="VerificationType">Проверка за наличие на входящ параметър.</td>
				<td class="ErrDescription">Missing input parameter.
</td>
			</tr>
			<tr>
				<td class="col1">-10508</td>
				<td class="VerificationType">Проверка дали входния параметър превишава дадена горна граница със стойност от тип реално число.</td>
				<td class="ErrDescription">Wrong input data.
</td>
			</tr>
			</table>
</div>
</td>
			</tr>
			<tr>
				<td id="col1">AbsSum</td>
				<td id="col2">[IN]</td>
				<td id="col3">[STRING]</td>
				<td id="def"><pre>AbsSum

Това е незадължителен параметър, показващ стойността на надбавката или отстъпката (в зависимост от знака) като сума. 
Не е допустима отстъпка със стойност по-голяма от стойността на продажбата.</pre>

				<label><span>!</span>Error support</label>
				<div>			<table width="100%" border="1">
				<tr>
					<th>Error value</th>
					<th>Verification type</th>
					<th>Description</th>
				</tr>
			<tr>
				<td class="col1">-10500</td>
				<td class="VerificationType">Проверка за наличие на входящ параметър.</td>
				<td class="ErrDescription">Missing input parameter.
</td>
			</tr>
			<tr>
				<td class="col1">-10505</td>
				<td class="VerificationType">Проверка за това дали входния параметър е реално число.</td>
				<td class="ErrDescription">Wrong input data.
</td>
			</tr>
			</table>
</div>
</td>
			</tr>
			</table>
			</div>
		</td>
	</tr>
</table>
<center>&copy; Copyright <a href="http://www.datecs.bg">DATECS</a> 2010 &reg;</center>
</body>
</html>
